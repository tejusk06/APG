"use strict";(()=>{console.log("Students logic for coordinator and admin");MemberStack.onReady.then(function(l){l.loggedIn||window.location.replace(window.location.hostname);let n=null;l.membership.name==="AP Guru Coordinators"?n=l.airtableid:l.membership.name==="AP Guru Admin"&&(n="admin"),document.querySelector(".student-templates").style.display="none";let d=document.querySelector(".students-wrap"),u=document.querySelector(".students-holder"),c=document.querySelector(".students-course"),a=document.querySelector(".students-search"),t=null,r=null;c.addEventListener("change",s=>{console.log(`You selected course ${s.target.value}`),t=s.target.value,i()}),a.addEventListener("input",s=>{console.log(`You selected search ${s.target.value}`),r=s.target.value.trim().toLowerCase(),i()});let i=()=>{let s=document.querySelectorAll(".students-wrap");console.log("got all students"),console.log("course filter is -",t),console.log("search filter is -",r),t&&r&&s.forEach(e=>{e.querySelector(".student-course-id").innerHTML!==t?e.style.display="none":e.querySelector(".student-name-text").innerHTML.toLowerCase().includes(r)?e.style.display="flex":e.style.display="none"}),t&&!r&&s.forEach(e=>{e.querySelector(".student-course-id").innerHTML===t?e.style.display="flex":e.style.display="none"}),r&&!t&&(console.log("course filter has value"),s.forEach(e=>{e.querySelector(".student-name-text").innerHTML.toLowerCase().includes(r)?e.style.display="flex":e.style.display="none"})),!t&&!r&&s.forEach(e=>{e.style.display="flex"})};fetch(`https://apguru-server.herokuapp.com/api/v1/coordinatorAdmin/students/${n}`).then(s=>s.json()).then(s=>{s.allStudents.forEach(e=>{let o=d.cloneNode(!0);e.image&&(o.querySelector(".student-image").src=e.image),o.querySelector(".student-name-text").innerHTML=e.name,o.querySelector(".student-location").innerHTML=e.location?e.location:".",o.querySelector(".student-classes").innerHTML=`${e.classesAttended} Completed, <br>
        ${e.classes} Assigned`,o.querySelector(".student-tests").innerHTML=`${e.testsCompleted}  Completed, <br>
        ${e.testsUpcoming} Pending, <br>
        ${e.tests} Assigned `,o.querySelector(".student-homework").innerHTML=`${e.homeworkCompleted} Completed, <br>
        ${e.homeworkPending} Pending, <br>
        ${e.homework} Assigned `,o.querySelector(".student-topics").innerHTML=e.topics+" completed",o.querySelector(".student-course-id").innerHTML=e.courseID,o.href=`/coordinator-admin/student-classes/?studentID=${e.studentID}&courseID=${e.courseID}`,u.append(o)})})});})();

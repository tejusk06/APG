"use strict";(()=>{console.log("Student Homework logic");MemberStack.onReady.then(function(n){n.loggedIn||window.location.replace(window.location.hostname),n["is-parent"]==="yes"&&(n.membership.name==="AP Guru SAT Students"?window.location.replace("/sat-new-program/dashboard"):n.membership.name==="AP Guru ACT Students"&&window.location.replace("/act-new-program/dashboard"));let m=n.airtableid;document.querySelectorAll(".homework-wrap").forEach(e=>{e.style.display="none"}),Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},fetch(`https://apguru-server.herokuapp.com/api/v1/homework/student/${m}`).then(e=>e.json()).then(e=>{let t=e.homeworkArray,q=document.querySelectorAll(".homework-wrap");console.log("response",e);function w(l,o){fetch(l).then(function(p){return p.blob().then(a=>{var r=document.createElement("a");r.href=URL.createObjectURL(a),r.setAttribute("download",o),r.click()})})}let h=new Date,g=function(l){return l.setHours(0,0,0,0)<=h.setHours(0,0,0,0)};t.forEach(l=>{document.querySelector(".empty-message").style.display="none",q.forEach(o=>{let p=o.querySelector(".hw-name").innerHTML,a=o.querySelector(".topic-id");if(a){let r=a.innerHTML;if(l.topicId===r){o.style.display="flex";let L=o.querySelector(".hw-name").innerHTML;l.attachment?o.querySelector(".hw-download-btn").onclick=function(){w(`${l.attachment}`,`${L} - Homework`)}:o.querySelector(".hw-download-btn").style.display="none",l.completed?(o.querySelector(".hw-completed").style.display="flex",o.querySelector(".homework-status").innerHTML="completed"):g(new Date(l.date).addDays(1))?(o.querySelector(".hw-due").style.display="flex",o.querySelector(".hw-due-date").innerHTML=l.momentDate,o.querySelector(".homework-status").innerHTML="due"):(o.querySelector(".hw-pending").style.display="flex",o.querySelector(".hw-pending-date").innerHTML=l.momentDate,o.querySelector(".homework-status").innerHTML="pending")}}})})});let f=document.querySelectorAll(".empty-text"),S=document.querySelectorAll(".filter-button"),i=document.querySelector("#filter-all"),d=document.querySelector("#filter-pending"),u=document.querySelector("#filter-completed"),y=document.querySelector("#filter-due"),s=()=>{S.forEach(e=>{e.classList.contains("filter-button-active")&&e.classList.remove("filter-button-active")})},c=()=>{f.forEach(e=>{e.style.display="none"})};i.addEventListener("click",function(){s(),i.classList.add("filter-button-active");let e=document.querySelectorAll(".homework-wrap");c(),document.querySelector(".empty-message").style.display="flex",document.querySelector(".empty-text.all").style.display="block",e.forEach(t=>{t.querySelector(".homework-status").innerHTML!=="null"?(t.style.display="flex",document.querySelector(".empty-message").style.display="none"):t.style.display="none"})}),d.addEventListener("click",function(){s(),d.classList.add("filter-button-active");let e=document.querySelectorAll(".homework-wrap");c(),document.querySelector(".empty-message").style.display="flex",document.querySelector(".empty-text.pending").style.display="block",e.forEach(t=>{t.querySelector(".homework-status").innerHTML==="pending"?(t.style.display="flex",document.querySelector(".empty-message").style.display="none"):t.style.display="none"})}),u.addEventListener("click",function(){s(),u.classList.add("filter-button-active");let e=document.querySelectorAll(".homework-wrap");c(),document.querySelector(".empty-message").style.display="flex",document.querySelector(".empty-text.completed").style.display="block",e.forEach(t=>{t.querySelector(".homework-status").innerHTML==="completed"?(t.style.display="flex",document.querySelector(".empty-message").style.display="none"):t.style.display="none"})}),y.addEventListener("click",function(){s(),y.classList.add("filter-button-active");let e=document.querySelectorAll(".homework-wrap");c(),document.querySelector(".empty-message").style.display="flex",document.querySelector(".empty-text.overdue").style.display="block",e.forEach(t=>{t.querySelector(".homework-status").innerHTML==="due"?(t.style.display="flex",document.querySelector(".empty-message").style.display="none"):t.style.display="none"})})});})();
